@if(museum){
  <div class="selected-museum-container container">
    <section class="museum-detail-card card shadow-sm p-4">
      <header class="museum-header d-flex justify-content-between align-items-center mb-3">
        <div>
          <h2>Détail du musée</h2>
          <p class="museum-subtitle-header">Vue d'ensemble du musée sélectionné avec ses informations et commentaires.</p>
        </div>
        @if(userRole=='admin'){
            <button class="btn btn-outline-secondary btn-back" [routerLink]="['/admin/museums']">
          <i class="bi bi-arrow-left"></i> Retour à la liste
        </button>
        }
        @else{
        <button class="btn btn-outline-secondary btn-back" [routerLink]="['/museums']">
          <i class="bi bi-arrow-left"></i> Retour à la liste
        </button>}
      </header>

        <div class="museum-info">
          <div class="left">
            <div class="left-container">
              <div class="museum-img-wrapper">
                <img [src]="museum.photo" alt="{{ museum.name }}" class="museum-image" />
                <div class="gallery-label">Galerie des mosaïques</div>
              </div>
              <div class="info">
                <h1 class="museum-name">{{ museum.name }}</h1>
                <div class="museum-subtitle">
                  <b>Catégorie</b>
                  <span class="category">· {{ museum.category }}</span>
                </div>
                <p class="museum-description"> {{museum.description}} </p>
              </div>
           
            </div>
            <p class="museum-created">Créé le · {{ museum.created_at | date:'d MMMM yyyy' }}</p>
                <div class="museum-actions ">
            <button class="btn btn-primary btn-buy-ticket" (click)="onBuyTicketClick()">
              Acheter un billet <i class="bi bi-arrow-right"></i>
            </button>
             <button class="btn btn-outline-secondary btn-itinerary" (click)="onItineraryClick(museum.name, museum.location)">
            <i class="fas fa-paper-plane"></i> Itinéraire
            </button>
          </div>
          </div>
           <div class="museum-meta">
          <h5>Informations</h5>

          <div class="meta-item">
            <label><i class="bi bi-geo-alt"></i> Lieu</label>
            <p>{{ museum.location }}</p>
          </div>

          <div class="meta-item">
            <label><i class="bi bi-tags"></i> Catégorie</label>
           <p> {{museum.category}} </p>
          </div>

          <div class="meta-item">
            <label><i class="bi bi-calendar-plus"></i> Créé le</label>
            <p>{{ museum.created_at | date:'d MMMM yyyy' }}</p>
          </div>

          <div class="meta-item">
            <label><i class="bi bi-clock"></i> Horaires</label>
            <p>{{ ('2025-01-01T' + museum.opening_hour) | date:'HH:mm' }} – {{ ('2025-01-01T' + museum.closing_hour) | date:'HH:mm' }}</p>
          </div>

          <div class="meta-item">
            <label><i class="bi bi-ticket-perforated"></i> Prix d'entrée</label>
            <p>{{ museum.entry_price }} DT</p>
          </div>

          <div class="meta-item">
            <label><i class="bi bi-people"></i> Visites</label>
            <p>{{ museum.visits}} visiteurs</p>
          </div>

          <div class="meta-info-box">
            <div><i class="bi bi-geo-alt"></i> <span>Lieu : {{ museum.location }}</span></div>
            <div><i class="bi bi-clock"></i> <span>Ouvert de {{ ('2025-01-01T' + museum.opening_hour) | date:'HH:mm' }} à {{ ('2025-01-01T' + museum.closing_hour) | date:'HH:mm' }} </span></div>
            <div><i class="bi bi-people"></i> <span>Environ {{ museum.visits }} visites </span></div>
          </div>
          <div class="meta-tip mt-3" role="note" aria-label="Astuce">
            <i class="bi bi-lightbulb"></i> Astuce : achetez vos billets en ligne pour éviter l'attente.
          </div>
        </div>
        
        </div>
          @if(weather?.current){
        <div class="meta-item weather-card">
          <label><i class="bi bi-cloud-sun"></i> Météo à {{museum?.location}}</label>
          <p>
            {{ weather.current.temperature }}°C, {{ weather.current.summary }}
          </p>
        </div>
      }


      <section class="comments-section mt-5">
        <h2 class="comments-title d-flex justify-content-between align-items-center mb-3">
          Commentaires
          <span class="comments-count badge">{{ museum.comments?.length || 0 }} avis</span>
        </h2>
        @if(museum.id){
          <div class="comments-links mt-4">
            <app-museum-comments [comments]="museum.comments || []" [museum_id]="museum.id"></app-museum-comments>
          </div>
        }
      </section>
    </section>
  </div>
}