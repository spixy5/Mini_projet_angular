<div class="password-change-component">
  <section class="password-change-form">
    <h2>Modifier votre mot de passe</h2>
    <p class="subtitle">Sécurisez votre compte Musées de Tunisie en choisissant un nouveau mot de passe fort et unique.</p>
            <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
        <fieldset class="password-fieldset">
            <legend>Changer le mot de passe</legend>
            <p class="reason">Pour des raisons de sécurité, nous vous demandons de renseigner votre mot de passe actuel.</p>

            <label for="security-code" class="input-label">
            Code de sécurité
            <div class="input-wrapper">
                <input type="text" id="security-code" formControlName="securityCode" name="security-code" placeholder="Code de sécurité" required />
                <i class="bi bi-lock-fill input-icon"></i>
            </div>
            </label>
               @if(forgotPasswordForm.get('securityCode')?.invalid && forgotPasswordForm.get('securityCode')?.touched)
          {
            <div class="error-message"><i class="bi bi-exclamation-triangle-fill"></i> Code de sécurité invalide</div>
          }

            <label for="new-password" class="input-label">
            Nouveau mot de passe
            <div class="input-wrapper">
                <input type="password" id="new-password" formControlName="password" name="new-password" placeholder="nouveau mot de passe" required />
                <i class="bi bi-lock-fill input-icon"></i>
            </div>
            </label>
             @if(forgotPasswordForm.get('password')?.errors?.['required'] && forgotPasswordForm.get('password')?.touched)
          {
            <div class="error-message"><i class="bi bi-exclamation-triangle-fill"></i> Mot de passe requis</div>
          }
          @if(forgotPasswordForm.get('password')?.errors?.['pattern'] && forgotPasswordForm.get('password')?.touched)
          {
            <div class="error-message"><i class="bi bi-exclamation-triangle-fill"></i> Doit contenir au moins 1 majuscule, 1 minuscule, 1 chiffre et 1 caractère spécial</div>
          }
          @if(forgotPasswordForm.get('password')?.errors?.['minlength'] && forgotPasswordForm.get('password')?.touched)
          {
            <div class="error-message"><i class="bi bi-exclamation-forgotPasswordForm-fill"></i> Minimum 8 caractères</div>
          }
        

            <label for="confirm-password" class="input-label">
            Confirmer le nouveau mot de passe
            <div class="input-wrapper">
                <input type="password" id="confirm-password" formControlName="confirmPassword" name="confirm-password" placeholder="Répétez le nouveau mot de passe" required />
                <i class="bi bi-lock-fill input-icon"></i>
            </div>
            </label>
              @if(forgotPasswordForm.get('confirmPassword')?.invalid && forgotPasswordForm  .get('confirmPassword')?.touched)
            {
              <div class="error-message">Confirmation invalide</div>
            }

            <button type="submit" class="btn-primary">Enregistrer le nouveau mot de passe</button>
        </fieldset>
        </form>

  </section>

  <aside class="password-security-info">
    <div class="info-box">
      <div class="info-header">
        <i class="bi bi-shield-lock-fill shield-icon"></i>
        <h3>Sécurité &amp; récupération</h3>
      </div>
      <p class="info-description">Gardez le contrôle de votre compte Musées de Tunisie.</p>
      <ul class="info-list">
        <li><i class="bi bi-check2-circle check-icon"></i> Utilisez un mot de passe unique pour ce compte.</li>
        <li><i class="bi bi-check2-circle check-icon"></i> Activez la récupération par email pour retrouver l'accès rapidement.</li>
        <li><i class="bi bi-check2-circle check-icon"></i> Déconnectez les anciennes sessions après chaque changement.</li>
      </ul>
      <footer class="info-footer">
        <button class="btn-secondary" (click)="toggleTips()">Voir les conseils</button>
      </footer>
    </div>
  </aside>
</div>
@if(showTips){
<div class="overlay" (click)="toggleTips()"></div>}
@if(showTips){
  <div class="tips-modal" >

  <div class="password-tips-box">
    <div class="tips-header">
    <i class="bi bi-lightbulb-fill tips-icon"></i>
    <h3>Conseils pour un mot de passe sécurisé</h3>
  </div>

    <ul class="tips-list">
      <li>Utilisez au moins 12 caractères avec des lettres, chiffres et symboles.</li>
      <li>Évitez les informations faciles à deviner (nom, date de naissance, "123456").</li>
      <li>Créez une phrase de passe simple à retenir mais difficile à deviner.</li>
      <li>N’utilisez pas le même mot de passe sur plusieurs sites.</li>
      <li>changez régulièrement votre mot de passe, surtout après une connexion suspecte.</li>
    </ul>

    <p class="tips-footer">
      <i class="bi bi-lightbulb-fill"></i>
      Astuce : un gestionnaire de mots de passe peut vous aider à les stocker en toute sécurité.
    </p>
  </div>
</div>

}
